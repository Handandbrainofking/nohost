(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{441:function(e,t,v){"use strict";v.r(t);var _=v(53),o=Object(_.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"api"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[e._v("#")]),e._v(" API")]),e._v(" "),v("p",[e._v("nohost 也对外提供了接口，方便第三方平台（如：发布部署系统）对接 nohost，可以对 nohost 账号对环境进行增删查改。")]),e._v(" "),v("blockquote",[v("p",[e._v("以下假设当前 nohost 部署对域名和端口为 "),v("code",[e._v("imwebtest.test.com:8080")])])]),e._v(" "),v("p",[e._v("首先，需要在管理员页面设置 "),v("code",[e._v("Auth Key")]),e._v(" ：\n"),v("img",{attrs:{src:"https://user-images.githubusercontent.com/11450939/69726792-3a3d9800-115c-11ea-841d-d2bb5922d089.png",alt:"image"}})]),e._v(" "),v("p",[e._v("假设设置的 "),v("code",[e._v("Auth Key")]),e._v("  为："),v("code",[e._v("test@imweb")]),e._v("。")]),e._v(" "),v("h3",{attrs:{id:"获取所有账号及环境列表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#获取所有账号及环境列表"}},[e._v("#")]),e._v(" 获取所有账号及环境列表")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/cgi-bin/list")])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("GET")])]),e._v(" "),v("li",[e._v("无需任何鉴权信息")])]),e._v(" "),v("h3",{attrs:{id:"获取当前选中的环境信息"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#获取当前选中的环境信息"}},[e._v("#")]),e._v(" 获取当前选中的环境信息")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/cgi-bin/get-env")])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("GET")])]),e._v(" "),v("li",[e._v("无需任何鉴权信息")])]),e._v(" "),v("h3",{attrs:{id:"获取指定账号的环境列表"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#获取指定账号的环境列表"}},[e._v("#")]),e._v(" 获取指定账号的环境列表")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/open-api/list")])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("GET")])]),e._v(" "),v("li",[e._v("鉴权参数，设置以下请求头：\n"),v("ul",[v("li",[v("code",[e._v("x-nohost-auth-key")]),e._v(": "),v("code",[e._v("test@imweb")]),e._v(" (以实际 AuthKey 为准)")]),e._v(" "),v("li",[v("code",[e._v("x-nohost-account-name")]),e._v(": "),v("code",[e._v("test")]),e._v(" (填入要添加环境的账号，如果环境名称包含非 ascii 字符，记得先 "),v("code",[e._v("encodeURIComponent(envName)")]),e._v(")")])])])]),e._v(" "),v("h3",{attrs:{id:"添加环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#添加环境"}},[e._v("#")]),e._v(" 添加环境")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/open-api/add-env")]),e._v(" "),v("blockquote",[v("p",[e._v("添加到顶部："),v("code",[e._v("http://imwebtest.test.com:8080/open-api/add-top-env")])])])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("post")])]),e._v(" "),v("li",[e._v("鉴权参数，设置以下请求头：\n"),v("ul",[v("li",[v("code",[e._v("x-nohost-auth-key")]),e._v(": "),v("code",[e._v("test@imweb")]),e._v(" (以实际 AuthKey 为准)")]),e._v(" "),v("li",[v("code",[e._v("x-nohost-account-name")]),e._v(": "),v("code",[e._v("test")]),e._v(" (填入要添加环境的账号，如果环境名称包含非 ascii 字符，记得先 "),v("code",[e._v("encodeURIComponent(envName)")]),e._v(")")])])]),e._v(" "),v("li",[e._v("参数：\n"),v("ul",[v("li",[v("code",[e._v("name")]),e._v(": 环境名称，最好不要加空格")]),e._v(" "),v("li",[v("code",[e._v("value")]),e._v(": 环境内容")])])])]),e._v(" "),v("h3",{attrs:{id:"修改环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#修改环境"}},[e._v("#")]),e._v(" 修改环境")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/open-api/modify-env")])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("POST")])]),e._v(" "),v("li",[e._v("鉴权参数，设置以下请求头：\n"),v("ul",[v("li",[v("code",[e._v("x-nohost-auth-key")]),e._v(": "),v("code",[e._v("test@imweb")]),e._v(" (以实际 AuthKey 为准)")]),e._v(" "),v("li",[v("code",[e._v("x-nohost-account-name")]),e._v(": "),v("code",[e._v("test")]),e._v(" (填入要添加环境的账号，如果环境名称包含非 ascii 字符，记得先 "),v("code",[e._v("encodeURIComponent(envName)")]),e._v(")")])])]),e._v(" "),v("li",[e._v("参数：\n"),v("ul",[v("li",[v("code",[e._v("name")]),e._v(": 环境名称，最好不要加空格")]),e._v(" "),v("li",[v("code",[e._v("value")]),e._v(": 环境内容")])])])]),e._v(" "),v("h3",{attrs:{id:"修改环境名称"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#修改环境名称"}},[e._v("#")]),e._v(" 修改环境名称")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/open-api/rename-env")])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("POST")])]),e._v(" "),v("li",[e._v("鉴权参数，设置以下请求头：\n"),v("ul",[v("li",[v("code",[e._v("x-nohost-auth-key")]),e._v(": "),v("code",[e._v("test@imweb")]),e._v(" (以实际 AuthKey 为准)")]),e._v(" "),v("li",[v("code",[e._v("x-nohost-account-name")]),e._v(": "),v("code",[e._v("test")]),e._v(" (填入要添加环境的账号，如果环境名称包含非 ascii 字符，记得先 "),v("code",[e._v("encodeURIComponent(envName)")]),e._v(")")])])]),e._v(" "),v("li",[e._v("参数：\n"),v("ul",[v("li",[v("code",[e._v("name")]),e._v(": 当前环境名称")]),e._v(" "),v("li",[v("code",[e._v("newName")]),e._v(": 新的环境名称")])])])]),e._v(" "),v("h3",{attrs:{id:"删除环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#删除环境"}},[e._v("#")]),e._v(" 删除环境")]),e._v(" "),v("ol",[v("li",[e._v("url: "),v("code",[e._v("http://imwebtest.test.com:8080/open-api/remove-env")])]),e._v(" "),v("li",[e._v("method： "),v("code",[e._v("POST")])]),e._v(" "),v("li",[e._v("鉴权参数，设置以下请求头：\n"),v("ul",[v("li",[v("code",[e._v("x-nohost-auth-key")]),e._v(": "),v("code",[e._v("test@imweb")]),e._v(" (以实际 AuthKey 为准)")]),e._v(" "),v("li",[v("code",[e._v("x-nohost-account-name")]),e._v(": "),v("code",[e._v("test")]),e._v(" (填入要添加环境的账号，如果环境名称包含非 ascii 字符，记得先 "),v("code",[e._v("encodeURIComponent(envName)")]),e._v(")")])])]),e._v(" "),v("li",[e._v("参数：\n"),v("ul",[v("li",[v("code",[e._v("name")]),e._v(": 环境名称")])])])])])}),[],!1,null,null,null);t.default=o.exports}}]);